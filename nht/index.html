<!DOCTYPE html>
<html>
<head>
    <title>Thêm/Xóa sản phẩm mới</title>
    <style>
        /* ... (phần style của bạn) ... */
        footer {
                text-align: center;
                padding: 5px;
                background-color: #ffffff;
                position: absolute;
                bottom: 10;
                width: 100%;
            }
        /* CSS cho phần hiển thị lịch sử */
        .product-history {
            margin-top: 20px;
            list-style-type: none;
        }
        .product-history li {
            margin-bottom: 10px;
        }
        /* css tiêu đề */
        @keyframes colorChange {
                10% { color: red; }
                25% { color: green; }
                35% {color: slateblue}
                50% { color: blue; }
                75% { color: purple; }
                100% { color: orange; }
            }
            @keyframes titleAnimation {
                0% { transform: scale(1); }
                50% { transform: scale(1.2); }
                100% { transform: scale(1); }
            }

            .animated-texttitle {
                display: inline-block;
                animation: colorChange 3s infinite;
            } /*màu chữ */
            .animated-texttitle1 {
                display: inline-block;
                animation: titleAnimation 2s infinite;
            } /*chữ phóng ra thu vào*/
            /*  */
        /* css của chữ dưới tiêu đề */
        @keyframes waveAnimation {
                0% {
                    transform: translateY(0);
                    color: red;
                }
                50% {
                    transform: translateY(-10px);
                    color: green;
                }
                100% {
                    transform: translateY(0);
                    color: blue;
                }
            }

            .animated-text {
                display: inline-block;
                animation: waveAnimation 1s infinite;
            }
    </style>
    <!-- <script>
        function addProduct() {
            const productName = document.getElementById('product-name').value;
            const productPrice = document.getElementById('product-price').value; // Lấy giá tiền
            const productImageFile = document.getElementById('product-image').files[0]; // Lấy tệp ảnh được tải lên

            if (productName && productPrice && productImageFile) {
                const reader = new FileReader();

                reader.onload = function(event) {
                    const productImage = event.target.result;
                    const product = {
                        name: productName,
                        price: productPrice,
                        image: productImage
                    };

                    const products = JSON.parse(localStorage.getItem('products')) || [];
                    products.push(product);
                    localStorage.setItem('products', JSON.stringify(products));

                    // Quay lại trang chính sau khi thêm sản phẩm
                    window.location.href = 'index.html';
                }

                // Thông báo thành công
                alert('Thêm sản phẩm thành công.');

                // Đọc tệp ảnh thành dạng base64
                reader.readAsDataURL(productImageFile);
            }else{
                // Thông báo lỗi
                alert('Vui lòng điền đầy đủ thông tin và chọn ảnh sản phẩm.');
            }
        }
    </script>
    <script>
        function removeProduct() {
            const productNameToDelete = document.getElementById('product-name-to-delete').value;
            const products = JSON.parse(localStorage.getItem('products')) || [];

            // Tìm sản phẩm dựa trên tên và xóa nó khỏi danh sách
            const updatedProducts = products.filter(product => product.name !== productNameToDelete);

            // localStorage.setItem('products', JSON.stringify(updatedProducts));
            if (updatedProducts.length < products.length) {
                localStorage.setItem('products', JSON.stringify(updatedProducts));
                // Thông báo xóa thành công
                alert('Xóa sản phẩm thành công.');
            } else {
                // Thông báo xóa thất bại
                alert('Không tìm thấy sản phẩm cần xóa.');
            }

            // Quay lại trang chính sau khi xóa sản phẩm
            window.location.href = 'index.html';
        }
    </script> -->
</head>
<body onkeydown="return false">

    <!-- ... (phần header và menu của bạn) ... -->

    <div class="container">
        <div class="add-product">
            <h2><span class="animated-text"><span class="animated-texttitle">Thêm sản phẩm mới</span></span></h2>
            <input type="text" id="product-name" placeholder="Tên sản phẩm">
            <input type="text" id="product-price" placeholder="Giá tiền"> <!-- Thêm trường giá tiền -->
            <input type="file" id="product-image">
            <button onclick="addProduct()">Thêm sản phẩm</button>
        </div>
    </div>
    <div class="container">
        <div class="remove-product">
            <h2><span class="animated-text"><span class="animated-texttitle">Xóa sản phẩm theo tên</span></span></h2>
            <input type="text" id="product-name-to-delete" placeholder="Tên sản phẩm">
            <button onclick="removeProduct()">Xóa sản phẩm</button>
        </div>
    </div>
    
    

    <div class="container">
        <div class="product-history">
            <h2>Lịch Sử Thêm/Xóa Sản Phẩm</h2>
            <ul id="history-list"></ul>
        </div>
    </div>
    
    <footer>
        <p><span class="animated-text">&copy; 2019 <a href="https://zalo.me/0919602479"><span class="animated-texttitle">OH TEA</span></a>. All rights reserved.</span></p>
    </footer>


    <script>
        const historyList = document.getElementById("history-list");

        // Lấy lịch sử từ localStorage hoặc tạo một mảng rỗng
        const productHistory = JSON.parse(localStorage.getItem("productHistory")) || [];

        function addProduct() {
            const productName = document.getElementById('product-name').value;
            const productPrice = document.getElementById('product-price').value; // Lấy giá tiền
            const productImageFile = document.getElementById('product-image').files[0]; // Lấy tệp ảnh được tải lên

            if (productName && productPrice && productImageFile) {
                const reader = new FileReader();

                reader.onload = function(event) {
                    const productImage = event.target.result;
                    const product = {
                        name: productName,
                        price: productPrice,
                        image: productImage
                    };

                    const products = JSON.parse(localStorage.getItem('products')) || [];
                    products.push(product);
                    localStorage.setItem('products', JSON.stringify(products));

                    // Quay lại trang chính sau khi thêm sản phẩm
                    window.location.href = 'index.html';
                }

                // Thông báo thành công
                alert('Thêm sản phẩm thành công.');

                // Đọc tệp ảnh thành dạng base64
                reader.readAsDataURL(productImageFile);
            }else{
                // Thông báo lỗi
                alert('Vui lòng điền đầy đủ thông tin và chọn ảnh sản phẩm.');
            }

            // Thêm sự kiện thêm sản phẩm vào lịch sử
            productHistory.push({
                event: "Thêm",
                name: productName,
                timestamp: Date.now(),
            });

            // Cập nhật lịch sử trong localStorage
            localStorage.setItem("productHistory", JSON.stringify(productHistory));

            // Hiển thị lại lịch sử
            updateHistory();
        }

        function removeProduct() {
            const productNameToDelete = document.getElementById('product-name-to-delete').value;
            const products = JSON.parse(localStorage.getItem('products')) || [];

            // Tìm sản phẩm dựa trên tên và xóa nó khỏi danh sách
            const updatedProducts = products.filter(product => product.name !== productNameToDelete);

            // localStorage.setItem('products', JSON.stringify(updatedProducts));
            if (updatedProducts.length < products.length) {
                localStorage.setItem('products', JSON.stringify(updatedProducts));
                // Thông báo xóa thành công
                alert('Xóa sản phẩm thành công.');
            } else {
                // Thông báo xóa thất bại
                alert('Không tìm thấy sản phẩm cần xóa.');
            }

            // Quay lại trang chính sau khi xóa sản phẩm
            window.location.href = 'index.html';

            // Thêm sự kiện xóa sản phẩm vào lịch sử
            productHistory.push({
                event: "Xóa",
                name: productNameToDelete,
                timestamp: Date.now(),
            });

            // Cập nhật lịch sử trong localStorage
            localStorage.setItem("productHistory", JSON.stringify(productHistory));

            // Hiển thị lại lịch sử
            updateHistory();
        }

        function updateHistory() {
            historyList.innerHTML = ""; // Xóa danh sách hiện tại

            // Hiển thị danh sách sự kiện trong 7 ngày gần nhất
            const currentTime = Date.now();
            const sevenDaysAgo = currentTime - 7 * 24 * 60 * 60 * 1000; // 7 ngày

            productHistory.forEach(event => {
                if (event.timestamp >= sevenDaysAgo) {
                    const listItem = document.createElement("li");
                    listItem.textContent = `${event.event} - ${event.name} - Ngày: ${new Date(event.timestamp).toLocaleDateString()}, Giờ: ${new Date(event.timestamp).toLocaleTimeString()}`;
                    historyList.appendChild(listItem);
                }
            });
        }

        // Hiển thị lịch sử khi trang được tải
        updateHistory();
    </script>




    <!-- chuột trái phải -->
    <style type='text/css'>
        body {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            -o-user-select: none;
            user-select: none;
        }
    </style>
    <script type='text/javascript'>
        var message = "NoRightClicking";
        function defeatIE() {
            if (document.all) {
                (message);
                return false;
            }
        }
        function defeatNS(e) {
            if (document.layers || (document.getElementById && !document.all)) {
                if (e.which == 2 || e.which == 3) {
                    (message);
                    return false;
                }
            }
        }
        if (document.layers) {
            document.captureEvents(Event.MOUSEDOWN);
            document.onmousedown = defeatNS;
        } else {
            document.onmouseup = defeatNS;
            document.oncontextmenu = defeatIE;
        }
        document.oncontextmenu = new Function("return false")
    </script>

    <!--CHống f12 ctrl u-->
    <script type="text/javascript" src="https://sites.google.com/site/bituotblog/disable-copy.js"></script>
    <style>
    body{
    -moz-user-select: none !important;
    -webkit-touch-callout: none!important;
    -webkit-user-select: none!important;
    -khtml-user-select: none!important;
    -moz-user-select: none!important;
    -ms-user-select: none!important;
    user-select: none!important;
    }
    </style>
    <script type='text/javascript'>
        $('body').on('contextmenu', 'https://zalo.me/0919602479', function(e){ return false; });
    </script>
    <!--end chống f12-->
</body>
</html>
